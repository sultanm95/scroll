{
    "apps": [
        {
            "name": "manga-server",
            "script": "server.js",
            "instances": "max",
            "exec_mode": "cluster",
            "watch": true,
            "ignore_watch": ["node_modules", "logs", "images", "uploads", "thumbnails"],
            "env": {
                "NODE_ENV": "production",
                "PORT": 3001
            },
            "error_file": "logs/pm2/err.log",
            "out_file": "logs/pm2/out.log",
            "log_file": "logs/pm2/combined.log",
            "merge_logs": true,
            "max_memory_restart": "1G",
            "autorestart": true,
            "node_args": "--max-old-space-size=2048"
        }
    ]
}